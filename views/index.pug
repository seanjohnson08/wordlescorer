extends layout

block content
  h1= title

  if topScorerInfo
  <section>
    <p>Today's current top scorer for Wordle #{topScorerInfo.wordleNumber}:  #{topScorerInfo.name}</p>
      ul
        li Score: #{topScorerInfo.score}
        li Solved on row #{topScorerInfo.solvedRow}
        li Solved above #{topScorerInfo.aboveTotal} (~#{topScorerInfo.percentage}) other users
  </section>

  table(class='stats')
    tr
      th Wordle Number
      th Unique users
      th Row 1
      th Row 2
      th Row 3
      th Row 4
      th Row 5
      th Row 6
      th No solve
    each val in globalStats 
      tr
        td(class='value') #{val.key}
        td(class='value-sm') #{val.total}
        td(class='value-sm') #{val.solvedRowCounts[1]} (#{val.solvedRowPercents[1]})
        td(class='value-sm') #{val.solvedRowCounts[2]} (#{val.solvedRowPercents[2]})
        td(class='value-sm') #{val.solvedRowCounts[3]} (#{val.solvedRowPercents[3]})
        td(class='value-sm') #{val.solvedRowCounts[4]} (#{val.solvedRowPercents[4]})
        td(class='value-sm') #{val.solvedRowCounts[5]} (#{val.solvedRowPercents[5]})
        td(class='value-sm') #{val.solvedRowCounts[6]} (#{val.solvedRowPercents[6]})
        td(class='value-sm') #{val.solvedRowCounts[0]} (#{val.solvedRowPercents[0]})

  table(class='stats')
    <caption>#{scoreMessage}</caption>
    tr
      th Total Manually Scored
      th Total User Count
      th Last Updated
    tr
      td(class='value') #{scoredCount}
      td(class='value') #{userCount}
      td(class='value') #{lastUpdated}

  table(class='scores')
    <caption>After Thu Oct 20 2022 1:30pm EDT, rows that are highlighted are tweets that are scored as a result of the user directly mentioning the bot. Everyone else was randomly selected for scoring.</caption>
    tr
      th Screename
      th Score
      th Date
      th Link
    each val in datalist
      if val.score
        tr(class=val.isManual && 'highlight')
          td #[a(href="https://www.twitter.com/"+val.name) #{val.name}]
          td #{val.score} 
            if val.solvedRow
              ='(Solved on ' + val.solvedRow
            else
              ='(Not solved'
            if val.wordleNumber 
              =' | Wordle ' + val.wordleNumber +')'
            else
              =')'
          td #{val.datestring}
          td #[a(href="https://www.twitter.com/"+val.name+"/status/"+val.id) tweet]
